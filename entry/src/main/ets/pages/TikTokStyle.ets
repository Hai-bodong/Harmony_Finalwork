import router from '@ohos.router';
import {Videoaction,Videoitem}from '../Support/VideoSupport'
@Entry
@Component
struct TikTokStyle {
  @State currentTab: string = 'æŽ¨è'
  @State isPlaying: boolean = true
  @State likeCount: number = 12000
  @State commentCount: number = 2312
  @State showFloatingWindow: boolean = true

  build() {
    Stack() {
      // è§†é¢‘å®¹å™¨
      Video({
        src: $r('app.media.dancing'),
        currentProgressRate: 1.0,
        controller: new VideoController()
      })
        .width('100%')
        .height('100%')
        .objectFit(ImageFit.Cover)
        .autoPlay(true)
        .loop(true)
        .muted(true)

      // é¡¶éƒ¨å¯¼èˆª
      Row() {
        ForEach(['å…³æ³¨', 'æŽ¨è', 'çƒ­é—¨'], (tab: string) => {
          Text(tab)
            .fontSize(18)
            .fontWeight(this.currentTab === tab ? FontWeight.Bold : FontWeight.Normal)
            .opacity(this.currentTab === tab ? 1.0 : 0.7)
            .margin({ left: 20, right: 20 })
            .onClick(() => {
              this.currentTab = tab
            })
        })
      }
      .width('100%')
      .height(56)
      .backgroundColor('rgba(0, 0, 0, 0.5)')
      .position({ x: 0, y: 0 })

      // ä¾§è¾¹æ“ä½œæŒ‰é’®
      Column() {
        ForEach([
          { icon: 'â¤ï¸', label: this.likeCount.toString() },
          { icon: 'ðŸ’¬', label: this.commentCount.toString() },
          { icon: 'â¤´ï¸', label: 'åˆ†äº«' },
          { icon: 'â™«', label: 'éŸ³ä¹' }
        ], (action:Videoaction) => {
          Column() {
            Text(action.icon)
              .fontSize(24)
              .width(40)
              .height(40)
              .backgroundColor('rgba(255, 255, 255, 0.2)')
              .borderRadius(20)
              .textAlign(TextAlign.Center)
            Text(action.label)
              .fontSize(12)
              .margin({ top: 4 })
          }
          .margin({ bottom: 20 })
        })
      }
      .position({ x: '90%', y: '50%' })
      .translate({ x: -20, y: -100 })

      // åº•éƒ¨è§†é¢‘ä¿¡æ¯
      Column() {
        Row() {
          Image($r('app.media.profile1'))
            .width(50)
            .height(50)
            .borderRadius(25)
          Text('@èˆžè¹ˆè¾¾äºº')
            .fontSize(16)
            .fontWeight(FontWeight.Bold)
            .margin({ left: 10 })
        }
        Text('è¡—èˆžæ—¥å¸¸ç»ƒä¹ ï¼Œä¸€èµ·æ„Ÿå—éŸ³ä¹çš„é­…åŠ› #èˆžè¹ˆ #è¡—èˆž #éŸ³ä¹')
          .fontSize(14)
          .margin({ top: 10 })
        Row() {
          Text('â™«')
            .fontSize(16)
            .width(16)
            .height(16)
            .backgroundColor('rgba(255, 255, 255, 0.2)')
            .borderRadius(8)
            .textAlign(TextAlign.Center)
          Text('è¡—èˆžéŸ³ä¹åˆé›† - DJç‚¸åœº')
            .fontSize(14)
            .margin({ left: 10 })
        }
      }
      .width('70%')
      .position({ x: 16, y: '80%' })

      // åŠ¨æ€å­—å¹•
      Text('æ„Ÿå—èŠ‚å¥ è·ŸéšéŸ³ä¹çš„éŸµå¾‹')
        .fontSize(18)
        .fontColor(Color.White)
        .textShadow({ radius: 4, color: Color.Black, offsetX: 2, offsetY: 2 })
        .position({ x: 0, y: '70%' })
        .width('100%')
        .textAlign(TextAlign.Center)

      // åº•éƒ¨å¯¼èˆªæ 
      Row() {
        ForEach([
          { icon: 'ðŸ ', label: 'é¦–é¡µ' },
          { icon: 'ðŸ”', label: 'å‘çŽ°' },
          { icon: '+', label: 'åˆ›å»º' },
          { icon: 'ðŸ’¬', label: 'æ¶ˆæ¯' },
          { icon: 'ðŸ‘¤', label: 'æˆ‘' }
        ], (item:Videoitem) => {
          Column() {
            if (item.icon === '+') {
              Text(item.icon)
                .fontSize(24)
                .width(40)
                .height(40)
                .backgroundColor('#FF0050')
                .borderRadius(8)
                .textAlign(TextAlign.Center)
            } else {
              Text(item.icon)
                .fontSize(24)
            }
            Text(item.label)
              .fontSize(12)
              .margin({ top: 4 })
          }
          .margin({ left: 20, right: 20 })
        })
      }
      .width('100%')
      .height(56)
      .backgroundColor('rgba(0, 0, 0, 0.5)')
      .position({ x: 0, y: '100%' })
      .translate({ y: -56 })

      // æ‚¬æµ®çª—
      if (this.showFloatingWindow) {
        Video({
          src: $r('app.media.dancing'),
          currentProgressRate: 1.0,
          controller: new VideoController()
        })
          .width(60)
          .height(60)
          .borderRadius(8)
          .position({ x: '90%', y: '90%' })
          .translate({ x: -80, y: -80 })
          .autoPlay(true)
          .loop(true)
          .muted(true)
      }
    }
    .width('100%')
    .height('100%')
    .backgroundColor(Color.Black)
  }
}
